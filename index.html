<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Game Nh·∫≠u 2 V√≤ng Quay</title>
    <style>
        :root {
            --gold: #f1c40f;
            --red: #e74c3c;
            --blue: #3498db;
            --dark: #2c3e50;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(180deg, #1a1a1a 0%, #000 100%);
            color: white;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
        }

        h1 { font-size: 1.5rem; margin: 15px 0; color: var(--gold); text-shadow: 0 0 10px rgba(241, 196, 15, 0.5); }

        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            width: 100%;
            max-width: 500px;
        }

        .wheel-box {
            position: relative;
            width: 280px;
            height: 280px;
        }

        canvas {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 5px solid #fff;
            box-shadow: 0 0 20px rgba(0,0,0,0.8);
            transition: transform 4s cubic-bezier(0.1, 0, 0.2, 1);
        }

        .pointer {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 30px;
            background: #fff;
            clip-path: polygon(50% 100%, 0 0, 100% 0);
            z-index: 10;
        }

        .wheel-label {
            position: absolute;
            bottom: -25px;
            width: 100%;
            text-align: center;
            font-weight: bold;
            color: var(--gold);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        #result-box {
            margin-top: 40px;
            padding: 15px;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--gold);
            width: 90%;
            text-align: center;
            min-height: 60px;
        }

        #final-text {
            font-size: 1.2rem;
            line-height: 1.5;
        }

        .highlight-name { color: var(--blue); font-weight: bold; font-size: 1.4rem; }
        .highlight-gift { color: var(--red); font-weight: bold; font-size: 1.4rem; }

        button {
            margin: 20px 0;
            padding: 15px 50px;
            font-size: 1.3rem;
            font-weight: bold;
            background: var(--gold);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(241, 196, 15, 0.4);
        }

        button:disabled { background: #7f8c8d; cursor: not-allowed; }

        @media (min-width: 768px) {
            .game-container { flex-direction: row; max-width: 800px; justify-content: center; }
        }
    </style>
</head>
<body>

    <h1>üçª ƒê·ªÜ NH·∫§T T·ª¨U V∆Ø∆†NG üçª</h1>

    <div class="game-container">
        <div class="wheel-box">
            <div class="pointer"></div>
            <canvas id="wheelName"></canvas>
            <div class="wheel-label">Ai l√† n·∫°n nh√¢n?</div>
        </div>

        <div class="wheel-box">
            <div class="pointer"></div>
            <canvas id="wheelGift"></canvas>
            <div class="wheel-label">S·ªë ph·∫≠n ra sao?</div>
        </div>
    </div>

    <div id="result-box">
        <div id="final-text">S·∫µn s√†ng ch∆∞a? Nh·∫•n QUAY th√¥i!</div>
    </div>

    <button id="spinBtn">QUAY NGAY</button>

    <script>
        const names = ["NCT", "A Qu·∫£", "C. Lan", "A Thi", "E Chinh", "E H√≤a", "E An", "E Ch∆∞∆°ng", "S∆°n", "Thao", "KM 1", "KM 2"];
        const gifts = [
            { label: "L√¨ x√¨ 20k", color: "#FFD700" },
            { label: "U·ªëng 1 ch√©n", color: "#e74c3c" },
            { label: "Qua l∆∞·ª£t", color: "#3498db" },
            { label: "L√¨ x√¨ 10k", color: "#f1c40f" },
            { label: "Ch·ªâ ƒë·ªãnh", color: "#9b59b6" },
            { label: "U·ªëng 2 ch√©n", color: "#c0392b" },
            { label: "U·ªëng 1/2", color: "#e67e22" },
            { label: "U·ªëng h·ªô", color: "#1abc9c" }
        ];

        function drawWheel(canvasId, items) {
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');
            const num = items.length;
            const arc = (2 * Math.PI) / num;
            canvas.width = 500;
            canvas.height = 500;

            items.forEach((item, i) => {
                const angle = i * arc;
                ctx.beginPath();
                ctx.fillStyle = (typeof item === 'string') ? (i % 2 === 0 ? '#2c3e50' : '#34495e') : item.color;
                ctx.moveTo(250, 250);
                ctx.arc(250, 250, 240, angle, angle + arc);
                ctx.lineTo(250, 250);
                ctx.fill();
                ctx.stroke();

                ctx.save();
                ctx.translate(250, 250);
                ctx.rotate(angle + arc / 2);
                ctx.textAlign = "right";
                ctx.fillStyle = "#fff";
                ctx.font = "bold 20px Arial";
                ctx.fillText(typeof item === 'string' ? item : item.label, 220, 10);
                ctx.restore();
            });
        }

        let rotationName = 0;
        let rotationGift = 0;
        const spinBtn = document.getElementById('spinBtn');
        const finalText = document.getElementById('final-text');

        function spinAll() {
            spinBtn.disabled = true;
            finalText.innerHTML = "ƒêang t√¨m n·∫°n nh√¢n...";

            // Quay v√≤ng t√™n
            const randomNameIdx = Math.floor(Math.random() * names.length);
            const extraDegName = (360 * 5) + (360 - (randomNameIdx * (360 / names.length))) - 90; 
            rotationName += extraDegName;
            document.getElementById('wheelName').style.transform = `rotate(${rotationName}deg)`;

            // Quay v√≤ng qu√† (ch·∫≠m h∆°n 1 t√≠)
            setTimeout(() => {
                finalText.innerHTML = "Xem s·ªë ph·∫≠n th·∫ø n√†o...";
                const randomGiftIdx = Math.floor(Math.random() * gifts.length);
                const extraDegGift = (360 * 5) + (360 - (randomGiftIdx * (360 / gifts.length))) - 90;
                rotationGift += extraDegGift;
                document.getElementById('wheelGift').style.transform = `rotate(${rotationGift}deg)`;

                // Hi·ªÉn th·ªã k·∫øt qu·∫£ cu·ªëi c√πng sau khi v√≤ng 2 d·ª´ng
                setTimeout(() => {
                    const person = names[randomNameIdx];
                    const fate = gifts[randomGiftIdx].label;
                    finalText.innerHTML = `<span class="highlight-name">${person}</span> ∆°i, nh·∫≠n ngay: <br><span class="highlight-gift">${fate}</span>`;
                    spinBtn.disabled = false;
                    
                    if (navigator.vibrate) navigator.vibrate([100, 50, 100]);
                }, 4000);
            }, 1000);
        }

        spinBtn.addEventListener('click', spinAll);
        drawWheel('wheelName', names);
        drawWheel('wheelGift', gifts);
    </script>
</body>
</html>

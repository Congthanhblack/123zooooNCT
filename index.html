<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mini Game Nh·∫≠u 2 V√≤ng Quay (Fixed)</title>
    <style>
        :root {
            --gold: #FFD700;
            --red: #e74c3c;
            --blue: #3498db;
            --dark-bg: #121212;
            --panel-bg: #1e1e1e;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--dark-bg);
            color: white;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            touch-action: manipulation; /* NgƒÉn zoom tr√™n mobile */
        }

        h1 {
            font-size: 1.8rem;
            margin: 20px 0;
            color: var(--gold);
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 0 2px 5px rgba(0,0,0,0.5);
            text-align: center;
        }

        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
            width: 100%;
            max-width: 800px;
            padding: 10px;
            box-sizing: border-box;
        }

        .wheel-wrapper {
            position: relative;
            width: 300px;
            height: 300px;
            max-width: 90vw;
            max-height: 90vw;
        }

        .wheel-box {
            width: 100%;
            height: 100%;
            position: relative;
            border-radius: 50%;
            border: 8px solid #2c3e50;
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
            overflow: hidden;
        }

        canvas {
            width: 100%;
            height: 100%;
            display: block;
            /* Th·ªùi gian quay l√† 5 gi√¢y v·ªõi hi·ªáu ·ª©ng ch·∫≠m d·∫ßn */
            transition: transform 5s cubic-bezier(0.25, 0.1, 0.25, 1);
        }

        .pointer {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 50px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 384 512'%3E%3Cpath fill='%23ffffff' d='M384 192c0 87.4-117 243-168.3 307.2c-12.3 15.3-35.1 15.3-47.4 0C117 435 0 279.4 0 192C0 86 86 0 192 0s192 86 192 192z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: center bottom;
            background-size: contain;
            z-index: 10;
            filter: drop-shadow(0 2px 3px rgba(0,0,0,0.3));
        }

        .wheel-label {
            margin-top: 15px;
            font-weight: bold;
            color: var(--gold);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 1.1rem;
            text-align: center;
        }

        #result-panel {
            margin-top: 30px;
            padding: 20px;
            border-radius: 15px;
            background: var(--panel-bg);
            border: 2px solid #333;
            width: 90%;
            max-width: 600px;
            text-align: center;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        #final-text {
            font-size: 1.4rem;
            line-height: 1.6;
        }

        .waiting { color: #bdc3c7; font-style: italic; }
        .highlight-name { color: var(--blue); font-weight: 900; font-size: 1.6rem; }
        .highlight-gift { color: var(--red); font-weight: 900; font-size: 1.8rem; display: block; margin-top: 5px; }

        button#spinBtn {
            margin: 40px 0;
            padding: 15px 60px;
            font-size: 1.5rem;
            font-weight: bold;
            background: linear-gradient(to bottom, #FFD700, #E6C200);
            color: #1a1a1a;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3), inset 0 2px 3px rgba(255,255,255,0.4);
            transition: transform 0.2s, filter 0.2s;
            outline: none;
        }

        button#spinBtn:hover { filter: brightness(1.1); transform: translateY(-2px); }
        button#spinBtn:active { transform: translateY(1px); box-shadow: 0 2px 5px rgba(255, 215, 0, 0.3); }
        button#spinBtn:disabled { background: #555; color: #999; cursor: not-allowed; box-shadow: none; transform: none; }

        /* Responsive cho m√†n h√¨nh l·ªõn h∆°n (Tablet/PC) */
        @media (min-width: 768px) {
            .game-container {
                flex-direction: row;
                justify-content: center;
                align-items: flex-start;
                gap: 50px;
            }
            .wheel-wrapper { width: 350px; height: 350px; }
            h1 { font-size: 2.5rem; }
        }
    </style>
</head>
<body>

    <h1>üçª ƒê·ªÜ NH·∫§T T·ª¨U V∆Ø∆†NG üçª</h1>

    <div class="game-container">
        <div>
            <div class="wheel-wrapper">
                <div class="pointer"></div>
                <div class="wheel-box">
                    <canvas id="wheelName"></canvas>
                </div>
            </div>
            <div class="wheel-label">Ai l√† n·∫°n nh√¢n?</div>
        </div>

        <div>
            <div class="wheel-wrapper">
                <div class="pointer"></div>
                <div class="wheel-box">
                    <canvas id="wheelGift"></canvas>
                </div>
            </div>
            <div class="wheel-label">S·ªë ph·∫≠n ra sao?</div>
        </div>
    </div>

    <div id="result-panel">
        <div id="final-text" class="waiting">Nh·∫•n n√∫t QUAY ƒë·ªÉ b·∫Øt ƒë·∫ßu ƒë·ªãnh ƒëo·∫°t!</div>
    </div>

    <button id="spinBtn">QUAY NGAY</button>

    <script>
        // Danh s√°ch d·ªØ li·ªáu (c√≥ th·ªÉ ch·ªânh s·ª≠a t·∫°i ƒë√¢y)
        const names = ["NCT", "A Qu·∫£", "C. Lan", "A Thi", "E Chinh", "E H√≤a", "E An", "E Ch∆∞∆°ng", "S∆°n", "Thao", "KM 1", "KM 2"];
        const gifts = [
            { label: "L√¨ x√¨ 20k", color: "#f1c40f", textCol: "#000" },
            { label: "U·ªëng 1 ch√©n", color: "#c0392b", textCol: "#fff" },
            { label: "Qua l∆∞·ª£t", color: "#3498db", textCol: "#fff" },
            { label: "L√¨ x√¨ 10k", color: "#f39c12", textCol: "#000" },
            { label: "Ch·ªâ ƒë·ªãnh", color: "#8e44ad", textCol: "#fff" },
            { label: "U·ªëng 2 ch√©n", color: "#d35400", textCol: "#fff" },
            { label: "U·ªëng 1/2", color: "#e67e22", textCol: "#fff" },
            { label: "U·ªëng h·ªô", color: "#16a085", textCol: "#fff" }
        ];

        // H√†m v·∫Ω v√≤ng quay
        function drawWheel(canvasId, items) {
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');
            const num = items.length;
            const arc = (2 * Math.PI) / num;
            // TƒÉng ƒë·ªô ph√¢n gi·∫£i cho canvas n√©t h∆°n tr√™n mobile
            canvas.width = 800;
            canvas.height = 800;
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = canvas.width / 2 - 10; // Tr·ª´ vi·ªÅn

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            items.forEach((item, i) => {
                const angle = i * arc;
                ctx.beginPath();
                // M√†u s·∫Øc cho v√≤ng t√™n (xen k·∫Ω) ho·∫∑c m√†u ƒë·ªãnh s·∫µn cho v√≤ng qu√†
                ctx.fillStyle = (typeof item === 'string') ? (i % 2 === 0 ? '#34495e' : '#2c3e50') : item.color;
                ctx.moveTo(centerX, centerY);
                // V·∫Ω cung tr√≤n t·ª´ t√¢m
                ctx.arc(centerX, centerY, radius, angle, angle + arc);
                ctx.lineTo(centerX, centerY);
                ctx.fill();
                ctx.stroke();

                // V·∫Ω text
                ctx.save();
                ctx.translate(centerX, centerY);
                // Xoay ƒë·∫øn gi·ªØa mi·∫øng b√°nh
                ctx.rotate(angle + arc / 2);
                ctx.textAlign = "right";
                ctx.fillStyle = (typeof item === 'string') ? "#ecf0f1" : item.textCol;
                ctx.font = "bold 32px Arial"; // Font to h∆°n do canvas ph√¢n gi·∫£i cao
                // ƒê·∫©y text ra g·∫ßn m√©p ngo√†i
                ctx.fillText(typeof item === 'string' ? item : item.label, radius - 20, 12);
                ctx.restore();
            });
        }

        // Bi·∫øn theo d√µi t·ªïng g√≥c quay
        let currentRotationName = 0;
        let currentRotationGift = 0;
        let isSpinning = false;
